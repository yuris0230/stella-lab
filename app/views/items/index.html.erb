<div class="page-content">
  <!-- Page header for Items list -->
  <header class="page-header">
    <h1 class="page-title">Items</h1>
    <p class="page-lead">
      Browse all items such as weapons, armor, accessories and materials.
      Basic filters for rarity and type will be added here.
    </p>
  </header>

  <!-- Filter bar for items -->
  <%= form_with url: items_path, method: :get, local: true, html: { class: 'filter-bar' } do %>
    <!-- Text search -->
    <div class="filter-search">
      <label class="filter-label" for="item_q">Search</label>
      <%= text_field_tag :q, @q, id: 'item_q', class: 'filter-search-input', placeholder: 'Search items…' %>
    </div>

    <!-- Rarity (SR / SSR etc.) -->
    <div class="filter-group">
      <div class="filter-group-label">Rarity</div>
      <div class="filter-pill-group">
        <% rarity_options = { 'SR' => Item.rarities[:sr], 'SSR' => Item.rarities[:ssr] } %>
        <% rarity_options.each do |label, value| %>
          <% id = "item_rarity_#{label.downcase}" %>
          <%= check_box_tag 'rarities[]', value,
                            Array(params[:rarities]).include?(value.to_s),
                            id: id, class: 'filter-pill-input' %>
          <label class="filter-pill" for="<%= id %>"><%= label %></label>
        <% end %>
      </div>
    </div>

    <!-- Item type (weapon / armor / accessory / material) -->
    <div class="filter-group">
      <div class="filter-group-label">Type</div>
      <div class="filter-pill-group">
        <% type_options = {
          'Weapon'    => Item.item_types[:weapon],
          'Armor'     => Item.item_types[:armor],
          'Accessory' => Item.item_types[:accessory],
          'Material'  => Item.item_types[:material]
        } %>

        <% type_options.each do |label, value| %>
          <% id = "item_type_#{value}" %>
          <%= check_box_tag 'item_types[]', value,
                            Array(params[:item_types]).include?(value.to_s),
                            id: id, class: 'filter-pill-input' %>
          <label class="filter-pill" for="<%= id %>"><%= label %></label>
        <% end %>
      </div>
    </div>

    <!-- Submit + Reset -->
    <div class="filter-actions">
      <%= submit_tag 'Apply', class: 'filter-button-primary' %>
      <%= link_to 'Reset', items_path, class: 'filter-button-reset' %>
    </div>
  <% end %>

  <!-- Result list -->
  <section class="page-section">
    <% if @items.any? %>
      <ul class="simple-list">
        <% @items.each do |item| %>
          <li class="simple-list-item">
            <%= link_to item.name, item_path(item), class: 'simple-list-link' %>
            <span class="simple-list-meta">
              <%= item.rarity.upcase %> · <%= item.item_type.capitalize %>
            </span>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="page-muted">No items match your filters yet.</p>
    <% end %>
  </section>
</div>