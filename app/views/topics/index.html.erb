<div class="page-content">
  <!-- Page header -->
  <header class="app-page-header">
    <h1 class="app-page-title">Topics</h1>
    <p class="app-page-subtitle">
      Community topics and discussions. Feel free to read and join the conversation.
    </p>
  </header>

  <!-- Action row: new topic / login -->
  <div class="d-flex justify-content-end mb-3">
    <% if user_signed_in? %>
      <!-- If logged in: show "Create new topic" button -->
      <%= link_to "Create new topic",
                  new_topic_path,
                  class: "btn btn-primary btn-sm" %>
    <% else %>
      <!-- If not logged in: show "Log in" button -->
      <%= link_to "Log in to create a new topic",
                  new_user_session_path,
                  class: "btn btn-outline-light btn-sm" %>
    <% end %>
  </div>

  <!-- Topics list -->
  <% if @topics.present? %>
    <ul class="list-unstyled">
      <% @topics.each do |topic| %>
        <li class="mb-3 pb-3 border-bottom border-secondary">
          <div class="d-flex justify-content-between">
            <div>
              <strong>
                <%= link_to topic.title, topic_path(topic), class: "text-light" %>
              </strong>
              <div class="small text-muted">
                <%= topic.created_at.strftime("%Y-%m-%d %H:%M") %>
              </div>
            </div>
            <div class="small text-muted">
              <!-- จำนวน reply -->
              <%= pluralize(topic.posts.count, "post") %>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="text-muted">No topics have been created yet.</p>
  <% end %>
</div>